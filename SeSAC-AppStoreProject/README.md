- [목차](#-------------ver10)
  * [🗒 앱설명 및 개요](#앱-설명-및-개요)
  * [🚀 트러블슈팅](#트러블슈팅)
  * [🔗 개발규칙](#개발규칙)
  * [🤔 고민한부분](#고민한-부분)
  * [🗓 기능공수산정](#기능공수산정)
    + [이터레이션 1](#이터레이션-1)
    + [이터레이션 2](#이터레이션-2)
    + [이터레이션 3](#이터레이션-3)
    + [이터레이션 4](#이터레이션-4)
  * [👩‍👩‍👧‍👦팀빌딩](#팀빌딩)
    + [1차 토론내용](#1차-토론-내용)
    + [2차 토론내용](#2차-토론-내용)




## 앱 설명 및 개요

- **앱스토어링크** : https://apps.apple.com/kr/app/%EC%9D%B4%EB%B3%84%EC%B0%A8%EB%8B%A8/id1596845534
- **특이 사항** : 현재는 “**이별차단**"으로 서비스 중
- **한줄 설명** :  연인들의 이별을 예방하는데 도움을 주는 서비스
- **기간** : 2021.11.15(월) ~ 12.08(수)
- **역할** : 앱의 전체 UI 및 기능 개발, 앱스토어 배포 및 관리 - 개인프로젝트
- **Stack** : 
  - UIKit
  - 네트워크 통신 - Alamofire
  - DataBase - Realm
  - H.I.G
  - OpenAPI활용
  - SideMenu 
- **주요 기능** :
  - 버킷리스트 : 사용자는 연애 관련 버킷리스트를 추가하고 체크표시를 할 수 있습니다.
  - 연애테스트 : 사용자는 원하는 항목을 선택하고 연애관련 테스트를 진행할 수 있습니다.
  - 추억 간직하기 : 사용자는 상대방과 함께한 추억들에 관해 일기처럼 작성할 수 있습니다.
  - 연애 명언 : 사용자는 연애관련 명언들을 확인할 수 있습니다.

## 개발규칙

- Git규칙
  - main브런치는 프로젝트 배포 시점에 메인으로 머지
  - 각각의 버전별 개발은 ver[버전]-test 브런치에서 진행 후 테스트가 통과하거나 이슈문제가 없다면 ver[버전]으로 머지하는 방식으로 개발
  - 커밋은 issue단위로 나누어 확인하기
    - 커밋메시지는 깃모지와 커밋 종류를 사용하여 작성
- 요구사항
  - 아이폰용 앱
  - 최소 타겟 iOS 13.0이상 지원
<br><br>

## 트러블슈팅

### 1. 네비게이션바에서 UIBarButtonItem을 SFSymbol이미지로 넣었을 때 네비게이션바 틴트색상을 변경해도 색상이변경되지 않는 문제

   → image로 넣었을 때는 네비게이션바 위에 이미지로 올라갔기 때문에 UIBarButtonItem의 틴트색상을 직접 변경해서 해결

   ```swift
   UIBarButtonItem(barButtonSystemItem: <UIBarButtonItem.SystemItem>, target: <Any?>, action: <Selector?>)
   
   let menuButton = UIBarButtonItem(image: <UIImage?>, style: <UIBarButtonItem.Style>, target: <Any?>, action: <Selector?>)
   menuButton.tintColor = .customPink
   ```

### 2. 서비스 기획문제 - 서버구현

- 서버DB를 사용해서 데이터를 저장하고 읽어오려고 기획을 진행했는데, heroku + Vapor + postgreSQL를 사용하여 구현을 진행했지만, 서버관리비용과 개인정보 보안 문제로 인해 추후 진행 예정
    - 최소한의 보안(비밀번호 단방향 인코딩, 비밀번호 찾기,변경기능)이 적용되어야 하는 부분을 알게 되었습니다.
    - heroku 무료플랜의 경우 cold기능이 있어 일정 기간동안 서버통신이 없으면 서버가 잠들어 버리는 기능이 있다는 부분을 알게 되었습니다.

### 3. 리젝 사유 : 앱 이름 문제

![1](https://user-images.githubusercontent.com/55218398/170468711-45af329d-7858-4021-8f17-e7fed9c1256f.png)


- 전반적인 앱의 제목 및 이미지 이름을 이별백신으로 사용했는데 코로나로 인해서, 의료쪽 관련 서비스는 개인을 승인시킬 수 없다고 했습니다
    - 이별백신 → 이별차단으로 변경
    

### 4. 리젝사유 : 사진앨범에 접근권한을 요청할 때 왜 요청하는지 구체적으로 작성하기


<img width="1176" alt="2" src="https://user-images.githubusercontent.com/55218398/170468977-5434c977-862e-499c-87ce-5e51c1d81bf5.png">

<img width="560" alt="2" src="https://user-images.githubusercontent.com/55218398/170468946-72a710e6-3923-4be1-91f4-4bd6680b559e.png">



### 5. async~await구문 사용하는 경우 TestFlight 앱 충돌문제

- 테스트플라이트를 통해서 실기기에서 앱을 테스트를 진행하였는데 async~await구문을 사용할 때, 프로젝트의 최소버전 타겟이 iOS15.0이거나 Xcode버전이 13.2 이하인 경우에 테스트플라이트앱이 충돌이 되면서 종료되는 이슈가 있었습니다.
    - Build Phases에서 Library Concurrency를 옵셔널로 처리하기 (버전타겟 15.0이하 Xcode13.2이하인 경우 임시해결방법)

<br><br>

## 고민한 부분
### 1. 온보딩 화면, 연애테스트화면에서 UIPageViewController를 사용할지? UICollectionView를 사용할지?

- 온보딩 화면과 연애테스트화면은 다음(Skip)버튼을 클릭시 화면에 표시된 정보들을 변경해줘야 했습니다.
- 이 기능을 구현하기 위해서 UIPageViewController기능을 사용하여 여러 뷰컨트롤러를 생성하는 방법과 UICollectionView를 사용해서 CollectionViewCell을 넘겨주는 방법이 있었습니다.
    

<img width="560" alt="2" src="https://user-images.githubusercontent.com/55218398/170469307-7c405a6e-1f3d-4786-b81e-adb88dd09125.png">
<img width="560" alt="2" src="https://user-images.githubusercontent.com/55218398/170469333-50c91c9f-19dc-48cd-833e-e5c78d647e56.png">

    - 아이템 마다 컬렉션뷰의 높이와 너비를 지정
    - Scrollview.frame.width = collection view.frame.width 와 동일합니다.
    - contentOffset.x 을 사용하여 스크롤을 했을 때 x좌표를 이동시킵니다.
    

> **해결방법**
> 

저의 상황에서는 단순히 이미지와 텍스트만 변경해주고 전체적인 화면 UI가 바뀌지 않는다고 생각해서 여러 뷰컨트롤러를 만드는 방법보다 컬렉션뷰를 사용하면 메모리를 좀 더 효율적으로 사용할 수 있어서 컬렉션뷰를 사용해서 진행했습니다.

### 2. 사이드메뉴 라이브러리를 사용했을 때, 스토리보드를 여러파일로 나눠서 진행한 경우 모달방식을 사용했을 때 화면전환을 할 때마다 뷰가 사라지지 않고 쌓이는 문제

- 사이드메뉴 라이브러리를 사용해서 전반적인 앱의 화면전환을 진행하려고 했는데 스토리보드를 여러파일로 나눠서 진행해서 Segue를 사용할 수 없었고, 모달을 사용하면 뷰가 쌓이는 문제가 있었고, 네비게이션컨트롤러를 이용한 화면전환방식은 연관성이 없는 화면간의 전환인데 맞지 않다고 생각했습니다.
- 일단 사이드메뉴 라이브러리가 어떻게 구현되어있는지 확인하고 부모뷰컨트롤러를 두고 보이는 화면을 자식뷰로 설정한 후 상황에 맞게 자식뷰를 제거하고 변경하는 방식으로 해결했습니다.

<img width="560" alt="2" src="https://user-images.githubusercontent.com/55218398/170469354-ffc96102-ce98-4d68-85d1-fe0a82e8c7aa.png">
<img width="560" alt="2" src="https://user-images.githubusercontent.com/55218398/170469366-99b0f15f-b5fe-4559-aa96-6a13ad984db1.png">


> **해결방법**
> 
- 사이드메뉴가 될 UITableViewController, MainVC(ParentVC)가 될 뷰컨트롤러 생성
- 첫 화면은 홈화면으로 MainVC의 자식뷰컨트롤러로 설정
- 사이드메뉴버튼 클릭한 경우 타겟을 MainVC로 지정한 후 MainVC에서 SideMenu를 띄어줍니다.
- 사이드메뉴의 셀이 클릭되었을 때 델리게이트패턴을 사용해서 MainVC가 뷰를 띄어줍니다.

## 3. 직접 만든 연애 명언 JSON을 활용하는 방법 선택하기

1. Encodable 프로토콜을 사용하여 직접 JSON을 작성하는 방법
2. 서버 DB에 저장한후 네트워크 통신으로 사용하기
3. DataAsset에 JSON파일 추가해서 사용하기

> **해결방법**
> 

저의 상황에서는 Encodable프로토콜을 사용하면  Swift파일을 생성하고 직접 텍스트로 작성하면 파일이 많아 지는 것을 예방하고 싶어서 제외했고, 서버DB를 사용한다면 추가 및 수정을 할 경우에 유용할 것 같았지만 서버구현을 직접해야하는 문제가 있었고, DataAsset을 사용하면 추가 및 수정에는 단점이 있지만 파일만 추가한 후 디코딩하는 방법이 깔끔해서 DataAsset을 사용했습니다.

<br><br>

## 기능공수산정

### 이터레이션 1

<11.15(월) ~ 11.17(수)>

- 프로젝트 기획하기
- 화면 UI 스케치
- 애플 개발자 계정등록
- UML 작성
- 개발 규칙 작성
- 서버 DB 스키마 설계

<br><br>

### 이터레이션 2

<11.18(목) ~ 11.21(일)>

- 서버 원격 올리기
- Restful-API 문서 작성하기
- 서버 DB 구현

<br><br>

### 이터레이션 3

<11.22(월) ~ 11.28(일)>

- 기획 수정 (느린 우체통 → 이별 백신)
- 화면 UI 구현 - 오토레이아웃 설정
- 버킷리스트 기능구현
- 연애테스트 기능구현
- 명언 기능구현
- 추억 간직하기 기능구현

<br><br>

### 이터레이션 4

<11.29(월) ~ 12.5(일)>

- 코드 리팩토링
- 에러 처리
- 앱 출시
- 리젝 대응하기

<br><br>

## 팀빌딩

- 개인프로젝트를 진행하면서 팀원들간의 서로 개발하면서 의문점이나 정보들을 공유하는 방식으로 진행했습니다.
- 팀원 : 배경원, 이성용, 양지영, 권오현, 김성연

<br><br>

### 1차 토론 내용

1. 카카오톡모바일에서 사진전송할 때 사진목록 보여주는 방식 - PhotoKit과 관련있지 않을까? 컬렉션뷰로 보여주는 건가?
2. MVVM-C란?
   - Coordinators는 뷰 컨트롤러 계층을 관리하는 것이 중요한 개념이므로 ios에서 유용한 패턴입니다. Coordinators는 본질적으로 MVVM에 속하지 않으며 MVC또는 다른 패턴에도 사용할 수 있습니다.
   - Coordinator 의 가장 중요한 역할은 viewcontroller에서 프리젠테이션 로직을 가져가는 것
   - ViewController 는 뷰모델과 UI바인딩 UI액션을 처리하는 일부 기능이외에는 다른 책임을 가지지 않는 상태가 될수 있다.
   - 참고링크
     - https://junhyi-park.medium.com/mvvm-c-학습자료-정리-7f169f3e376a
     - https://eunjin3786.tistory.com/72
3. 화면 설치시 튜토리얼 관련 페이지 - 온보딩
4. 유용한 라이브러리 목록
   - toast, IQKeyboardManager, SideMenu, Almofire
5. 앱스토어 최적화(ASO) 전략 - 앱스토어 검색 잘 뜰 수 있게 최적화하는 방법
6. UI스케치 관련 Tip : 앱 디자인을 시작할 때 로고를 작성하고 로고에 지정한 컬러색상을 기준으로 앱의 전반적인 이미지를 작성하면 편리하다 - 권오현님

<br><br>

### 2차 토론 내용

1. 서버 관련 피드백
   - 실제 서비스를 하는 경우, 개인정보를 직접 받아야한다면 비밀번호 단방향 인코딩, 비번 찾기, 변경 등이 적용되야 하고 보안사고가 생겼을 때 최소한의 가이드에 맞춰 적용되지 않으면 형사처벌이 될 수 있습니다.
     - 비밀번호 단방향 암호화는 해당 서버 프레임워크에서 제공하거나 인증 관련 라이브러리를 사용
   - 개인 개발자 추천 - aws freetier 무료서비스나 파이어베이스 추천
2. 시뮬레이터기기에서 움직임 설정하기
3. 데이터 비교하는 방식 편리하게 사용하기 - Comparable프로토콜, Equatable
